<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichBrat$ Customs | Bespoke Automotive</title>
    
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@900,700,500,400&f[]=clash-display@600,700,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
</head>
<body>

    <div class="bg-navy"></div>
    <div class="bg-mesh"></div>
    <div class="bg-vignette"></div>
    
    <nav>
        <div class="logo-container" onclick="app.goHome()">
            <img src="logo.png" alt="RichBrat$ Customs">
        </div>

        <div class="user-panel" id="nav-actions">
            <span class="nav-link" onclick="openModal('login')">Client Login</span>
            <button class="btn-luxury" style="padding: 10px 20px; font-size: 0.75rem;" onclick="openModal('register')">Register</button>
        </div>
        <div class="user-panel" id="user-actions" style="display:none;">
            <span style="cursor:pointer; position:relative; font-size: 1.1rem; color:var(--text-white);" onclick="app.toggleCart()">
                <i class="fa-solid fa-bag-shopping"></i>
                <span id="cart-count">0</span>
            </span>
            <span class="nav-link" id="nav-username" onclick="app.navTo('view-profile')">MY GARAGE</span>
            <span class="nav-link" style="color:var(--text-muted);" onclick="app.logout()">Logout</span>
        </div>
    </nav>

    <div id="cart-panel">
        <div class="cart-header">
            <h2 class="gold-text" style="font-family: var(--text-display);">SHOPPING BAG</h2>
            <i class="fa-solid fa-xmark" style="cursor:pointer; font-size:1.5rem;" onclick="app.toggleCart()"></i>
        </div>
        <div class="cart-items" id="cart-items-list">
            <p style="color:var(--text-muted); text-align:center; margin-top:20px;">Your bag is empty.</p>
        </div>
        <div class="cart-footer">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-size:1.1rem; font-weight:700;">
                <span>TOTAL</span><span id="cart-total" class="gold-text">$0</span>
            </div>
            <button class="btn-luxury" style="width:100%;" onclick="app.openCheckout()">PROCEED TO CHECKOUT</button>
        </div>
    </div>

    <div class="modal-overlay" id="auth-modal">
        <div class="modal-box">
            <h2 id="modal-title" style="margin-bottom: 10px; font-family: var(--text-display); color:var(--gold);">CLIENT ACCESS</h2>
            <p style="color:var(--text-muted); margin-bottom:30px; font-size:0.9rem;">Access your bespoke garage profile.</p>
            <form onsubmit="app.handleAuth(event)">
                <input type="text" id="reg-name" class="form-input" placeholder="FULL NAME" style="display:none;">
                <input type="email" id="email" class="form-input" placeholder="EMAIL ADDRESS" required>
                <input type="password" id="password" class="form-input" placeholder="PASSWORD" required>
                <div id="extra-fields" style="display:none;">
                    <input type="tel" id="reg-phone" class="form-input" placeholder="PHONE NUMBER">
                    <input type="text" id="reg-car" class="form-input" placeholder="VEHICLE MODEL">
                    <input type="text" id="reg-insta" class="form-input" placeholder="INSTAGRAM (OPTIONAL)">
                </div>
                <button type="submit" class="btn-luxury" style="width:100%;" id="submit-btn">ENTER</button>
            </form>
            <div style="margin-top:20px; display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-muted);">
                <span style="cursor:pointer;" onclick="switchMode()">Create Account / Login</span>
                <span style="cursor:pointer;" onclick="closeModal()">Close</span>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="checkout-modal">
        <div class="modal-box" style="max-width: 600px;">
            <h2 class="gold-text" style="font-family: var(--text-display); margin-bottom: 20px;">SHIPPING DETAILS</h2>
            <form onsubmit="app.processCheckout(event)">
                <input type="text" id="chk-address" class="form-input" placeholder="STREET ADDRESS" required>
                <div style="display:flex; gap:20px;">
                    <input type="text" id="chk-city" class="form-input" placeholder="CITY" required>
                    <input type="text" id="chk-zip" class="form-input" placeholder="POSTAL CODE" required>
                </div>
                <select id="chk-payment" class="form-input" style="background:var(--navy); color:#fff;">
                    <option value="ONLINE">SECURE PAYMENT (UPI/CARD)</option>
                    <option value="COD">CASH ON DELIVERY</option>
                </select>
                <button type="submit" class="btn-luxury" style="width:100%; margin-top:10px;" id="chk-btn">PAY SECURELY ($<span id="chk-total">0</span>)</button>
            </form>
            <p style="margin-top:20px; color:var(--text-muted); cursor:pointer; font-size:0.8rem;" onclick="document.getElementById('checkout-modal').style.display='none'">Cancel Transaction</p>
        </div>
    </div>

    <div id="view-landing" class="section active">
        <div class="hero">
            <div>
                <p class="subtitle">BESPOKE AUTOMOTIVE MODIFICATIONS</p>
                <h1>DEFINING<br><span class="gold-text">EXCELLENCE</span></h1>
                <p style="max-width:600px; margin: 0 auto 40px; color:var(--text-muted); line-height:1.8; font-size:1.1rem;">
                    We specialize in high-end cosmetic upgrades, custom bodywork, and luxury aesthetics. 
                    Elevate your vehicle with our exclusive modification services.
                </p>
                <button class="btn-luxury" onclick="app.enterGarage()">EXPLORE SERVICES</button>
            </div>
        </div>
    </div>

    <div id="view-dashboard" class="section">
        <div class="content-box">
            <h2 class="section-title">THE HUB</h2>
            <p class="section-desc">Select a service to begin your customization journey.</p>

            <div class="dashboard-grid">
                <div class="dash-card" onclick="app.loadStore()">
                    <i class="fa-solid fa-layer-group dash-icon"></i>
                    <h3 style="margin-bottom:10px; font-family:var(--text-display);">PARTS BOUTIQUE</h3>
                    <p style="color:var(--text-muted);">Exclusive body kits & aesthetic upgrades</p>
                </div>
                <div class="dash-card" onclick="app.navTo('view-booking')">
                    <i class="fa-regular fa-calendar-check dash-icon"></i>
                    <h3 style="margin-bottom:10px; font-family:var(--text-display);">APPOINTMENTS</h3>
                    <p style="color:var(--text-muted);">Schedule a visit to our studio</p>
                </div>
                <div class="dash-card" onclick="app.navTo('view-consultancy')">
                    <i class="fa-solid fa-pen-ruler dash-icon"></i>
                    <h3 style="margin-bottom:10px; font-family:var(--text-display);">MODS CONSULTANCY</h3>
                    <p style="color:var(--text-muted);">Get expert advice for your build</p>
                </div>
            </div>
        </div>
    </div>

    <div id="view-profile" class="section">
        <div class="content-box">
            <h2 class="section-title">MY GARAGE</h2>
            <p class="section-desc">Manage your vehicle details and view your modification history.</p>

            <div class="profile-container">
                <div class="profile-sidebar">
                    <h3 class="gold-text" style="margin-bottom:20px; font-family:var(--text-display);">CLIENT PROFILE</h3>
                    <form onsubmit="app.updateProfile(event)">
                        <label style="color:var(--text-muted); font-size:0.8rem;">FULL NAME</label>
                        <input type="text" id="p_name" class="form-input" style="padding:10px;" disabled>
                        
                        <label style="color:var(--text-muted); font-size:0.8rem;">CONTACT</label>
                        <input type="text" id="p_phone" class="form-input" style="padding:10px;">
                        
                        <label style="color:var(--text-muted); font-size:0.8rem;">CURRENT VEHICLE</label>
                        <input type="text" id="p_car" class="form-input" style="padding:10px;">
                        
                        <button type="submit" id="updateProfileBtn" class="btn-luxury btn-outline" style="width:100%; margin-top:10px;">SAVE CHANGES</button>
                    </form>
                </div>

                <div class="profile-main">
                    <h3 class="gold-text" style="margin-bottom:20px; font-family:var(--text-display);">ORDER HISTORY</h3>
                    <div id="order-history-list">
                        <p style="color:var(--text-muted);">Loading history...</p>
                    </div>
                </div>
            </div>
            
            <button class="btn-luxury btn-outline" style="margin-top:30px;" onclick="app.navTo('view-dashboard')">← BACK TO HUB</button>
        </div>
    </div>

    <div id="view-store" class="section">
        <div class="content-box">
            <h2 class="section-title">PARTS COLLECTION</h2>
            <div id="loading-store" style="color:var(--text-muted); text-align:center; padding:50px;">ACCESSING CATALOG...</div>
            <div class="store-grid" id="product-list"></div>
            <button class="btn-luxury btn-outline" style="margin-top:50px;" onclick="app.navTo('view-dashboard')">← BACK TO HUB</button>
        </div>
    </div>

    <div id="view-booking" class="section">
        <div class="content-box">
            <h2 class="section-title">STUDIO APPOINTMENT</h2>
            <div class="booking-grid">
                <div class="booking-form">
                    <p class="section-desc">Secure a slot for installation or inspection.</p>
                    <form id="bookingForm" onsubmit="app.bookSlot(event)">
                        <input type="date" id="b_date" class="form-input" required onchange="app.checkSlots()">
                        <select id="b_time" class="form-input" style="background:var(--navy);" disabled><option>Select Date First</option></select>
                        <input type="text" id="b_name" class="form-input" placeholder="YOUR NAME" required>
                        <input type="tel" id="b_phone" class="form-input" placeholder="PHONE NUMBER" required>
                        <input type="text" id="b_car" class="form-input" placeholder="VEHICLE MODEL" required>
                        <button type="submit" id="bookBtn" class="btn-luxury" style="width:100%;">CONFIRM APPOINTMENT</button>
                        <div id="booking-status" style="margin-top:15px; text-align:center; color:var(--gold);"></div>
                    </form>
                </div>
                <div class="vip-lounge">
                    <h3 class="gold-text" style="font-family: var(--text-display); font-size:1.5rem; margin-bottom:20px;">THE CLIENT LOUNGE</h3>
                    <p style="color:var(--text-muted); line-height:1.6; margin-bottom:20px;">Experience comfort while our specialists work on your vehicle.</p>
                    <div style="margin-bottom:15px; display:flex; gap:15px; align-items:center;">
                        <i class="fa-solid fa-couch gold-text"></i> <span style="color:#fff;">Premium Waiting Area</span>
                    </div>
                    <div style="margin-bottom:15px; display:flex; gap:15px; align-items:center;">
                        <i class="fa-solid fa-wifi gold-text"></i> <span style="color:#fff;">High-Speed Wi-Fi & Workstation</span>
                    </div>
                    <div style="display:flex; gap:15px; align-items:center;">
                        <i class="fa-solid fa-car-on gold-text"></i> <span style="color:#fff;">Live Workshop View</span>
                    </div>
                </div>
            </div>
            <button class="btn-luxury btn-outline" style="margin-top:40px;" onclick="app.navTo('view-dashboard')">← BACK TO HUB</button>
        </div>
    </div>

    <div id="view-consultancy" class="section">
        <div class="content-box" style="max-width:800px;">
            <h2 class="section-title">MODIFICATION CONSULTANCY</h2>
            <p class="section-desc">Share your vision. Our designers will create a bespoke plan for your vehicle.</p>
            
            <div id="consultancy-form-container">
                <form onsubmit="app.submitConsultation(event)">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                        <input type="text" id="c_name" class="form-input" placeholder="YOUR NAME" required>
                        <input type="tel" id="c_phone" class="form-input" placeholder="PHONE NUMBER" required>
                    </div>
                    <input type="email" id="c_email" class="form-input" placeholder="EMAIL ADDRESS" required>
                    <input type="text" id="c_car" class="form-input" placeholder="VEHICLE MODEL (e.g. BMW 3 Series)" required>
                    
                    <label style="color:var(--text-muted); display:block; margin-bottom:10px; font-weight:700; font-size:0.8rem;">REFERENCE IMAGE (OPTIONAL)</label>
                    <input type="file" id="c_image" class="form-input" accept="image/*" required style="padding: 12px; height: auto;">
                    
                    <textarea id="c_message" class="form-input" rows="4" placeholder="DESCRIBE YOUR VISION (Wrap color, body kit style, interior...)" required></textarea>
                    
                    <button type="submit" class="btn-luxury" style="width:100%;" id="consultBtn">SUBMIT INQUIRY</button>
                </form>
            </div>

            <div id="consultancy-success" style="display:none; text-align: center; padding: 40px; background: var(--navy-card); border: 1px solid var(--gold); margin-top: 20px;">
                <h3 class="gold-text" style="margin-bottom: 20px; font-family: var(--text-display); font-size: 1.5rem;">INQUIRY RECEIVED</h3>
                <p style="color:var(--text-white); margin-bottom: 30px;">Our team is reviewing your request. Connect with us instantly for priority discussion.</p>
                <a href="https://wa.me/9999999999" target="_blank" class="btn-luxury" style="text-decoration: none; display: inline-flex; background: #25D366; color: #fff; box-shadow:none;">
                    <i class="fa-brands fa-whatsapp" style="font-size: 1.2rem;"></i> CHAT ON WHATSAPP
                </a>
            </div>

            <button class="btn-luxury btn-outline" style="margin-top:40px;" onclick="app.navTo('view-dashboard')">← BACK TO HUB</button>
        </div>
    </div>

    <script src="script.js"></script>

</body>
</html>
