<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichBrat$ Customs | Bespoke Automotive</title>
    
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@900,700,500,400&f[]=clash-display@600,700,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
</head>
<body>

    <div id="drag-run-overlay">
        <div class="skid-marks"></div>
        <div class="hologram-car"><i class="fa-solid fa-car-side"></i></div>
    </div>

    <div class="bg-navy"></div>
    <div class="bg-grid"></div>
    <div class="bg-vignette"></div>
    
    <nav>
        <div class="logo-container" onclick="app.goHome()">
            <img src="logo.png" alt="RichBrat$ Customs">
        </div>
        <div class="user-panel" id="nav-actions">
            <span class="nav-link" onclick="openModal('login')">LOGIN</span>
            <button class="btn-luxury" style="padding: 10px 20px; font-size: 0.75rem;" onclick="openModal('register')">REGISTER</button>
        </div>
        <div class="user-panel" id="user-actions" style="display:none;">
            <span style="cursor:pointer; font-size: 1.1rem; color:var(--text-white);" onclick="app.toggleCart()">
                <i class="fa-solid fa-bag-shopping"></i>
                <span id="cart-count">0</span>
            </span>
            <span class="nav-link" id="nav-username" onclick="app.navTo('view-profile')">MY GARAGE</span>
            <span class="nav-link" style="color:var(--text-muted);" onclick="app.logout()">LOGOUT</span>
        </div>
    </nav>

    <div id="cart-panel">
        <div class="cart-header">
            <h2 class="gold-text" style="font-family: var(--text-display);">SHOPPING BAG</h2>
            <i class="fa-solid fa-xmark" style="cursor:pointer; font-size:1.5rem;" onclick="app.toggleCart()"></i>
        </div>
        <div class="cart-items" id="cart-items-list">
            <p style="color:var(--text-muted); text-align:center; margin-top:20px;">Empty.</p>
        </div>
        <div class="cart-footer">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-size:1.1rem; font-weight:700;">
                <span>TOTAL</span><span id="cart-total" class="gold-text">$0</span>
            </div>
            <button class="btn-luxury" style="width:100%;" onclick="app.openCheckout()">CHECKOUT</button>
        </div>
    </div>

    <div class="modal-overlay" id="auth-modal">
        <div class="modal-box">
            <h2 id="modal-title" class="holo-text" style="margin-bottom: 10px; font-family: var(--text-display);">CLIENT ACCESS</h2>
            <p style="color:var(--text-muted); margin-bottom:30px; font-size:0.9rem;">Secure biometric gateway.</p>
            <form onsubmit="app.handleAuth(event)">
                <input type="text" id="reg-name" class="form-input" placeholder="FULL NAME" style="display:none;">
                <input type="email" id="email" class="form-input" placeholder="EMAIL IDENTIFIER" required>
                <input type="password" id="password" class="form-input" placeholder="ACCESS KEY" required>
                <div id="extra-fields" style="display:none;">
                    <input type="tel" id="reg-phone" class="form-input" placeholder="PHONE">
                    <input type="text" id="reg-car" class="form-input" placeholder="CHASSIS MODEL">
                    <input type="text" id="reg-insta" class="form-input" placeholder="SOCIAL ID">
                </div>
                <button type="submit" class="btn-luxury" style="width:100%;" id="submit-btn">INITIALIZE</button>
            </form>
            <div style="margin-top:20px; display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-muted);">
                <span style="cursor:pointer;" onclick="switchMode()">Switch Mode</span>
                <span style="cursor:pointer;" onclick="closeModal()">Close Panel</span>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="checkout-modal">
        <div class="modal-box" style="max-width: 600px;">
            <h2 class="gold-text" style="font-family: var(--text-display); margin-bottom: 20px;">SHIPPING MANIFEST</h2>
            <form onsubmit="app.processCheckout(event)">
                <input type="text" id="chk-address" class="form-input" placeholder="DELIVERY COORDINATES" required>
                <div style="display:flex; gap:20px;">
                    <input type="text" id="chk-city" class="form-input" placeholder="SECTOR/CITY" required>
                    <input type="text" id="chk-zip" class="form-input" placeholder="ZONE CODE" required>
                </div>
                <select id="chk-payment" class="form-input" style="background:var(--navy); color:#fff;">
                    <option value="ONLINE">DIGITAL TRANSFER</option>
                    <option value="COD">PAYMENT ON ARRIVAL</option>
                </select>
                <button type="submit" class="btn-luxury" style="width:100%; margin-top:10px;" id="chk-btn">AUTHORIZE ($<span id="chk-total">0</span>)</button>
            </form>
            <p style="margin-top:20px; color:var(--text-muted); cursor:pointer; font-size:0.8rem;" onclick="document.getElementById('checkout-modal').style.display='none'">Abort</p>
        </div>
    </div>

    <div id="view-landing" class="section active">
        <div class="hero">
            <div>
                <p class="gold-text" style="letter-spacing:4px; font-weight:700;">ELITE AUTOMOTIVE ENGINEERING</p>
                <h1>PURE<br><span style="color:#fff; -webkit-text-stroke: 2px var(--gold); color:transparent;">ADRENALINE</span></h1>
                <p style="max-width:600px; margin: 20px auto 40px; color:var(--text-muted); line-height:1.8;">
                    Precision bodywork. High-performance aesthetic upgrades. 
                    Transform your machine into a masterpiece.
                </p>
                <button class="btn-luxury" onclick="app.enterGarage()"><i class="fa-solid fa-power-off"></i> IGNITE ENGINE</button>
            </div>
        </div>
    </div>

    <div id="view-dashboard" class="section">
        <div class="content-box">
            <h2 style="font-family:var(--text-display); font-size:3rem;">OPERATIONS DECK</h2>
            <div class="dashboard-grid">
                <div class="dash-card" onclick="app.loadStore()">
                    <div class="dash-icon"><i class="fa-solid fa-screwdriver-wrench"></i></div>
                    <div class="dash-text">
                        <h3 class="gold-text">PARTS ARMORY</h3>
                        <p style="color:var(--text-muted);">Acquire Mods & Kits</p>
                    </div>
                </div>
                <div class="dash-card" onclick="app.navTo('view-booking')">
                    <div class="dash-icon"><i class="fa-solid fa-calendar-check"></i></div>
                    <div class="dash-text">
                        <h3 class="gold-text">SERVICE BAY</h3>
                        <p style="color:var(--text-muted);">Schedule Appointment</p>
                    </div>
                </div>
                <div class="dash-card" onclick="app.navTo('view-consultancy')">
                    <div class="dash-icon"><i class="fa-solid fa-clipboard-list"></i></div>
                    <div class="dash-text">
                        <h3 class="gold-text">BLUEPRINT LAB</h3>
                        <p style="color:var(--text-muted);">Custom Consultation</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-profile" class="section">
        <div class="content-box">
            <h2 class="holo-text" style="font-family:var(--text-display); font-size:3rem; margin-bottom:30px;">MY GARAGE</h2>
            <div class="profile-container">
                <div class="profile-sidebar">
                    <h3 class="gold-text" style="margin-bottom:20px;">DRIVER DATA</h3>
                    <form onsubmit="app.updateProfile(event)">
                        <input type="text" id="p_name" class="form-input" disabled>
                        <input type="text" id="p_phone" class="form-input" placeholder="Phone">
                        <input type="text" id="p_car" class="form-input" placeholder="Current Build">
                        <button type="submit" id="updateProfileBtn" class="btn-luxury btn-outline" style="width:100%;">UPDATE SPECS</button>
                    </form>
                </div>
                <div class="profile-main">
                    <h3 class="gold-text" style="margin-bottom:20px;">BUILD HISTORY</h3>
                    <div id="order-history-list"></div>
                </div>
            </div>
            <button class="btn-luxury btn-outline" style="margin-top:30px;" onclick="app.navTo('view-dashboard')">← RETURN TO DECK</button>
        </div>
    </div>

    <div id="view-store" class="section">
        <div class="content-box">
            <h2 class="gold-text" style="font-family:var(--text-display); font-size:3rem;">INVENTORY</h2>
            <div id="loading-store" style="color:var(--text-muted); text-align:center; padding:50px;">INITIALIZING DATABASE...</div>
            <div class="store-grid" id="product-list"></div>
            <button class="btn-luxury btn-outline" style="margin-top:50px;" onclick="app.navTo('view-dashboard')">← RETURN TO DECK</button>
        </div>
    </div>

    <div id="view-booking" class="section">
        <div class="content-box">
            <h2 class="gold-text" style="font-family:var(--text-display); font-size:3rem;">RESERVE BAY</h2>
            <div class="booking-grid" style="display:grid; grid-template-columns: 1fr 1fr; gap:50px; margin-top:30px;">
                <form id="bookingForm" onsubmit="app.bookSlot(event)">
                    <input type="date" id="b_date" class="form-input" required onchange="app.checkSlots()">
                    <select id="b_time" class="form-input" disabled><option>Select Date</option></select>
                    <input type="text" id="b_name" class="form-input" placeholder="Pilot Name">
                    <input type="tel" id="b_phone" class="form-input" placeholder="Comms">
                    <input type="text" id="b_car" class="form-input" placeholder="Machine Model">
                    <button type="submit" id="bookBtn" class="btn-luxury" style="width:100%;">CONFIRM SLOT</button>
                </form>
                <div style="background:var(--navy-card); padding:30px; border:1px solid var(--gold);">
                    <h3 class="holo-text">VIP ACCESS INCLUDED</h3>
                    <ul style="list-style:none; margin-top:20px; color:var(--text-muted); line-height:2;">
                        <li><i class="fa-solid fa-check gold-text"></i> Premium Lounge Access</li>
                        <li><i class="fa-solid fa-check gold-text"></i> Live Dyno Viewing</li>
                        <li><i class="fa-solid fa-check gold-text"></i> 4K Sim Racing Rig</li>
                    </ul>
                </div>
            </div>
            <button class="btn-luxury btn-outline" style="margin-top:40px;" onclick="app.navTo('view-dashboard')">← RETURN TO DECK</button>
        </div>
    </div>

    <div id="view-consultancy" class="section">
        <div class="content-box">
            <h2 class="gold-text" style="font-family:var(--text-display); font-size:3rem;">PROJECT BLUEPRINT</h2>
            <div id="consultancy-form-container" style="max-width:800px;">
                <form onsubmit="app.submitConsultation(event)">
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
                        <input type="text" id="c_name" class="form-input" placeholder="Name">
                        <input type="tel" id="c_phone" class="form-input" placeholder="Phone">
                    </div>
                    <input type="email" id="c_email" class="form-input" placeholder="Email">
                    <input type="text" id="c_car" class="form-input" placeholder="Car Model">
                    <label style="color:var(--blueprint-blue); font-size:0.8rem; margin-bottom:5px; display:block;">UPLOAD REFERENCE SCHEMATIC (IMG)</label>
                    <input type="file" id="c_image" class="form-input">
                    <textarea id="c_message" class="form-input" rows="4" placeholder="Describe your vision..."></textarea>
                    <button type="submit" class="btn-luxury" style="width:100%;" id="consultBtn">TRANSMIT DATA</button>
                </form>
            </div>
            <div id="consultancy-success" style="display:none; text-align:center; padding:50px; background:var(--navy-card); border:1px solid var(--gold);">
                <h3 class="holo-text" style="font-size:2rem;">DATA RECEIVED</h3>
                <p style="color:#fff; margin-bottom:20px;">Our engineers are analyzing your schematic.</p>
                <a href="https://wa.me/9999999999" target="_blank" class="btn-luxury" style="text-decoration:none; background:#25D366; color:#fff;">
                    <i class="fa-brands fa-whatsapp"></i> SECURE CHAT
                </a>
            </div>
            <button class="btn-luxury btn-outline" style="margin-top:40px;" onclick="app.navTo('view-dashboard')">← RETURN TO DECK</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
